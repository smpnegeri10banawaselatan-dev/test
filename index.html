<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rekap Data Kecamatan - Donggala</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<style>
  body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
  #kecamatan-list li { cursor: pointer; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: all 0.2s; }
  #kecamatan-list li.active, #kecamatan-list li:hover { background-color: #e0f2fe; color: #0369a1; }
  #data-content { overflow-x: auto; }
</style>
</head>
<body class="bg-gray-50 min-h-screen flex">

  <!-- Sidebar kiri -->
  <nav class="w-64 bg-white p-4 border-r border-gray-200 shadow-sm h-screen sticky top-0">
    <h2 class="text-xl font-semibold mb-4">Kecamatan</h2>
    <ul id="kecamatan-list" class="space-y-1">
      <li data-kecamatan="" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin" class="active">Semua</li>
      <li data-kecamatan="Banawa" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Banawa</li>
      <li data-kecamatan="Banawa Tengah" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Banawa Tengah</li>
      <li data-kecamatan="Banawa Selatan" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Banawa Selatan</li>
      <li data-kecamatan="Rio Pakava" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Rio Pakava</li>
      <li data-kecamatan="Pinembani" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Pinembani</li>
      <li data-kecamatan="Tanantovea" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Tanantovea</li>
      <li data-kecamatan="Labuan" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Labuan</li>
      <li data-kecamatan="Sindue" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sindue</li>
      <li data-kecamatan="Sindue Tombusabora" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sindue Tombusabora</li>
      <li data-kecamatan="Sindue Tobata" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sindue Tobata</li>
      <li data-kecamatan="Sirenja" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sirenja</li>
      <li data-kecamatan="Balaesang" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Balaesang</li>
      <li data-kecamatan="Balaesang Tanjung" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Balaesang Tanjung</li>
      <li data-kecamatan="Dampelas" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Dampelas</li>
      <li data-kecamatan="Sojol" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sojol</li>
      <li data-kecamatan="Sojol Utara" data-endpoint="https://opensheet.elk.sh/152oNQyrJEeg-xW3okB2LKbGIUapxDakDMCbDjqpDl3U/Peralatan%20dan%20Mesin">Kecamatan Sojol Utara</li>
    </ul>
  </nav>

  <!-- Konten kanan -->
  <div class="flex-1 p-6" id="data-content">
    <h2 class="text-xl font-semibold mb-4">Rekap Data</h2>
    <div id="rekap-table" class="overflow-auto bg-white shadow-sm rounded-xl p-4">
      <p class="text-gray-500">Memuat data…</p>
    </div>
  </div>

<script>
const items = document.querySelectorAll('#kecamatan-list li');
const content = document.getElementById('rekap-table');

const allowedColumns = [
  "Urut", "Pengguna Barang",
  "Kode Barang", "Nama Barang", "Konfirmasi Keberadaan", "Kondisi",
  "Label BMD (selain Kendaraan)", "Penggunaan", "Nama Pengguna (Jika Penggunaan : Digunakan Pegawai)",
  "Status Pegawai Pengguna (Jika Penggunaan : Digunakan Pegawai)",
  "Keterangan Tambahan", "NIBAR", "Merek/tipe", "Nomor Polisi", "Nomor Rangka",
  "Nomor BPKB", "Nilai Perolehan", "Cara Perolehan", "Perolehan", "Status Penggunaan"
];

function loadData(item) {
  items.forEach(i => i.classList.remove('active'));
  item.classList.add('active');

  const url = item.dataset.endpoint;
  content.innerHTML = `<p class="text-gray-500">Memuat data ${item.dataset.kecamatan || 'Semua'}…</p>`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (data.length === 0) {
        content.innerHTML = `<p class="text-gray-500">Data kosong.</p>`;
        return;
      }

      let table = `<table class="min-w-full border border-gray-200"><thead class="bg-gray-100"><tr>`;
      allowedColumns.forEach(col => {
        table += `<th class="border px-3 py-2 text-left text-sm font-medium">${col}</th>`;
      });
      table += `</tr></thead><tbody>`;

      data.forEach(row => {
        table += `<tr class="hover:bg-gray-50">`;
        allowedColumns.forEach(col => {
          table += `<td class="border px-3 py-1 text-sm">${row[col] || ''}</td>`;
        });
        table += `</tr>`;
      });

      table += `</tbody></table>`;
      content.innerHTML = table;
    })
    .catch(err => {
      content.innerHTML = `<p class="text-red-500">Gagal memuat data: ${err}</p>`;
    });
}

// Load data semua saat halaman dibuka
window.addEventListener('DOMContentLoaded', () => {
  const firstItem = document.querySelector('#kecamatan-list li.active');
  if (firstItem) loadData(firstItem);
});

// Event click kecamatan
items.forEach(item => {
  item.addEventListener('click', () => loadData(item));
});
</script>

</body>
</html>
